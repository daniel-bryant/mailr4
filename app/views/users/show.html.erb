<% provide(:title, 'mail') %>
<div id="mail-wrap">
  <div id="button-row">
    <div class="sidebar">
      <a href="#" id="show-compose" class="btn btn-primary">Compose</a>
      <script>
        $(function() {
          $('a#show-compose').click(function(event){
            event.preventDefault();
            $('div#compose-box').toggle();
          });
        });
      </script>
    </div>

    <div class="content">
      <div class="left">
        <a href="#" class="btn"><i class="icon-ok"></i></a>
        <a href="#" class="btn"><i class="icon-refresh"></i></a>
        <a href="#" class="btn"><i class="icon-trash"></i></a>
      </div>

      <div class="right">
        0-0 of 0
        <div class="btn-group">
          <a href="#" class="btn"><i class="icon-chevron-left"></i></a>
          <a href="#" class="btn"><i class="icon-chevron-right"></i></a>
        </div>
      </div>
    </div>


  </div>

  <div class="tabbable tabs-left">
    <ul class="nav nav-tabs sidebar">
      <li class="active"><a href="#inbox" data-toggle="tab">Inbox<%= count_in_paren(@in_mail.count) %></a></li>
      <li><a href="#starred" data-toggle="tab">Starred<%= count_in_paren(@star_mail.count) %></a></li>
      <li><a href="#sent" data-toggle="tab">Sent<%= count_in_paren(@out_mail.count) %></a></li>
      <li><a href="#drafts" data-toggle="tab">Drafts<%= count_in_paren(@draft_mail.count) %></a></li>
    </ul> 

    <div class="tab-content content">
      <div id="inbox" class="tab-pane active">
        <% if @in_mail.any? %>
          <ul class="message-list">
            <%= render partial: "emails/inmail", collection: @in_mail %>
          </ul>
        <% else %>
          <div class="center">Nothing here</div>
        <% end %>
      </div>

      <div id="starred" class="tab-pane">
        <% if @star_mail.any? %>
          <ul class="message-list">
            <%= render partial: "emails/inmail", collection: @star_mail %>
          </ul>
        <% else %>
          <div class="center">Nothing here</div>
        <% end %>
      </div>

      <div id="sent" class="tab-pane">
        <% if @out_mail.any? %>
          <ul class="message-list">
            <%= render partial: "emails/outmail", collection: @out_mail %>
          </ul>
        <% else %>
          <div class="center">Nothing here</div>
        <% end %>
      </div>

      <div id="drafts" class="tab-pane">
        <% if @draft_mail.any? %>
          <ul class="message-list">
            <%= render partial: "emails/outmail", collection: @draft_mail %>
          </ul>
        <% else %>
          <div class="center">Nothing here</div>
        <% end %>
      </div>
    </div> <!-- /.tab-content content -->
  </div> <!-- /.tabbable tabs-left -->

  <div class="bottom-clear"></div>

  <div id="compose-box" class="hidden">
    <div id="compose-top">
      New Message
      <div class="right">
        <a href="#" class="btn btn-mini"><i class="icon-remove"></i></a>
      </div>
    </div>
    <%= render 'users/compose_form' %>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="readModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">From, To, Subject</h4>
        </div>
        <div class="modal-body">
          Body
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>

